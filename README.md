# BlockTraffic

BlockTraffic — это проект для блокировки доступа к запрещённым ресурсам на территории Российской Федерации. Он позволяет автоматически обновлять списки IP-адресов и доменов, блокировать их с помощью `iptables` и `unbound`, а также предоставляет Telegram-бот для удалённого управления.

## Основные функции
- **Блокировка IP и доменов**: Автоматическое обновление списков запрещённых ресурсов и их блокировка.
- **Управление через консоль**: Скрипт `manage.sh` предоставляет удобное меню для управления блокировкой.
- **Telegram-бот**: Управление блокировкой через Telegram, включая обновление списков, включение/отключение защиты и просмотр логов.


## Установка
1. **Склонируйте репозиторий**:
   ```bash
   git clone https://github.com/anten-ka/whitevpn.git
   cd whitevpn
   ```

2. **Назначьте права на выполнение скриптов**:
   ```bash
   chmod +x install.sh manage.sh install_bot.sh
   ```

3. **Запустите установку**:
   ```bash
   sudo ./install.sh
   ```
   Скрипт установит необходимые зависимости, настроит сервисы и скопирует файлы в `/opt/block-traffic`.

4. **(Опционально) Установите Telegram-бот**:
   После установки основного проекта выполните:
   ```bash
   sudo ./install_bot.sh
   ```
   Введите токен Telegram-бота и Telegram ID администратора, когда будет предложено.

## Использование
### Команда `blockme`
После установки используйте команду `blockme` для управления проектом:
```bash
sudo blockme
```
Команда запускает интерактивное меню с опциями:
- **0. Выход**: Завершает работу меню.
- **1. Запустить обновление списка IP и доменов**: Обновляет списки запрещённых ресурсов.
- **2. Деинсталлировать проект**: Удаляет все файлы, сервисы и конфигурации.
- **3. Отключить защиту**: Отключает блокировку (удаляет правила `iptables`, останавливает сервисы).
- **4. Включить защиту**: Включает блокировку (устанавливает правила `iptables`, запускает сервисы).
- **5. Перезагрузить сервисы**: Перезапускает `unbound` и правила `iptables`.
- **6. Установить/обновить Telegram-бот**: Устанавливает или обновляет Telegram-бот (токен и Telegram ID).

### Telegram-бот
После установки бота через `install_bot.sh` или опцию 6 в `blockme`:
- Бот предоставляет те же функции, что и меню `blockme`, через Telegram.
- Доступ ограничен Telegram ID администратора, указанным при установке.
- Команды бота:
  - `/start`: Открывает меню.
  - Обновление списков, включение/отключение защиты, перезапуск сервисов, просмотр состояния сервера, скачивание логов.

## Контакты
Для вопросов, предложений или сообщений об ошибках свяжитесь с нами:
- Email: [Ваш email]
- Telegram: [Ваш Telegram]
- GitHub Issues: [Ссылка на Issues репозитория]